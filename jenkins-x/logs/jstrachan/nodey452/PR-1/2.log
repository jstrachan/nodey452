
Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-mv9tt[0m
{"level":"info","ts":1589903416.9356673,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1589903416.936256,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-mnfpc[0m
{"level":"info","ts":1589903417.9656472,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1589903417.9665513,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-jstrachan-nodey452-pr-1-pr-buil-sqbz5-xc6qt[0m
{"level":"info","ts":1589903424.1173851,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1589903424.8259935,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/jstrachan/nodey452.git @ master in path /workspace/source"}

Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:1f87bf473e445a07803883b86693098911941fa4,1:8daefe9b6197720349e742eb5932d2d958ec0702
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git fetch origin --unshallow 8daefe9b6197720349e742eb5932d2d958ec0702: 1f87bf473e445a07803883b86693098911941fa4:
DEBUG: ran git fetch --unshallow origin 8daefe9b6197720349e742eb5932d2d958ec0702: 1f87bf473e445a07803883b86693098911941fa4: in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git branch
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git checkout master
DEBUG: ran git checkout master in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git reset --hard 1f87bf473e445a07803883b86693098911941fa4
DEBUG: ran git reset --hard 1f87bf473e445a07803883b86693098911941fa4 in 
DEBUG: JX_LOG_LEVEL=error LC_ALL=C git clean -fd .
DEBUG: ran clean --force -d . in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git merge 8daefe9b6197720349e742eb5932d2d958ec0702
DEBUG: ran git merge 8daefe9b6197720349e742eb5932d2d958ec0702 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git log --format=%H%x1f%an%x1f%ae%x1f%cn%x1f%ce%x1f%s%n%b%x1e 1f87bf473e445a07803883b86693098911941fa4..HEAD
Merged SHA 4077a0f73ba2fac5590b2b380f886224214d8c64 with commit message 'Merge commit '8daefe9b6197720349e742eb5932d2d958ec0702'' into base branch master
Merged SHA 8daefe9b6197720349e742eb5932d2d958ec0702 with commit message 'Update index.html' into base branch master
Merged SHA b16728e7a85b5a2583d29db11cfe5e764d2535c7 with commit message 'fix: polish home page' into base branch master

Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npmrc[0m
Command "credential" is deprecated, it will be removed on Jun 1 2020.  This is replaced by Tekton's mounted secrets
WARNING: failed to find Secret npm-token in namespace **

Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npm-install[0m
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN REPLACE_ME@1.0.0 No repository field.
npm WARN REPLACE_ME@1.0.0 No license field.

up to date in 0.357s
found 0 vulnerabilities


Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-npm-test[0m

> REPLACE_ME@1.0.0 test /workspace/source
> echo "no test specified" && exit 0

no test specified

Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-build-container-build[0m
ERROR: logging before flag.Parse: E0519 15:50:30.401205      10 metadata.go:241] Failed to unmarshal scopes: json: cannot unmarshal string into Go value of type []string
[36mINFO[0m[0000] Resolved base name node:9-slim to node:9-slim 
[36mINFO[0m[0000] Using dockerignore file: /workspace/source/.dockerignore 
[36mINFO[0m[0000] Resolved base name node:9-slim to node:9-slim 
[36mINFO[0m[0000] Retrieving image manifest node:9-slim        
ERROR: logging before flag.Parse: E0519 15:50:30.683936      10 metadata.go:142] while reading 'google-dockercfg' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg
ERROR: logging before flag.Parse: E0519 15:50:30.685734      10 metadata.go:159] while reading 'google-dockercfg-url' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg-url
[36mINFO[0m[0005] Retrieving image manifest node:9-slim        
[36mINFO[0m[0009] Built cross stage deps: map[]                
[36mINFO[0m[0009] Retrieving image manifest node:9-slim        
[36mINFO[0m[0011] Retrieving image manifest node:9-slim        
[36mINFO[0m[0015] cmd: EXPOSE                                  
[36mINFO[0m[0015] Adding exposed port: 8080/tcp                
[36mINFO[0m[0015] Checking for cached layer gcr.io/jstrachan-multicluster/cache:525c384f6e601ff8193adb4e30a0c5b8053db2f62146b7a8068787e9d9236849... 
[36mINFO[0m[0015] No cached layer found for cmd COPY . .       
[36mINFO[0m[0015] Unpacking rootfs as cmd COPY . . requires it. 
[36mINFO[0m[0022] Taking snapshot of full filesystem...        
[36mINFO[0m[0023] Resolving paths                              
[36mINFO[0m[0025] ENV PORT 8080                                
[36mINFO[0m[0025] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0025] EXPOSE 8080                                  
[36mINFO[0m[0025] cmd: EXPOSE                                  
[36mINFO[0m[0025] Adding exposed port: 8080/tcp                
[36mINFO[0m[0025] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0025] WORKDIR /usr/src/app                         
[36mINFO[0m[0025] cmd: workdir                                 
[36mINFO[0m[0025] Changed working directory to /usr/src/app    
[36mINFO[0m[0025] Creating directory /usr/src/app              
[36mINFO[0m[0025] Resolving paths                              
[36mINFO[0m[0025] Taking snapshot of files...                  
[36mINFO[0m[0025] COPY . .                                     
[36mINFO[0m[0025] Resolving paths                              
[36mINFO[0m[0025] Taking snapshot of files...                  
[36mINFO[0m[0025] CMD ["npm", "start"]                         
[36mINFO[0m[0025] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0025] Pushing layer gcr.io/jstrachan-multicluster/cache:525c384f6e601ff8193adb4e30a0c5b8053db2f62146b7a8068787e9d9236849 to cache now 

Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-make-preview[0m
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-1-2/" Chart.yaml
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-1-2/" ../*/Chart.yaml
sed -i -e "s|repository:.*|repository: gcr.io\/jstrachan-multicluster\/nodey452|" values.yaml
sed -i -e "s/tag:.*/tag: 0.0.0-SNAPSHOT-PR-1-2/" values.yaml
echo "  version: 0.0.0-SNAPSHOT-PR-1-2" >> requirements.yaml
** step helm build
Adding missing Helm repo: storage.googleapis.com https://storage.googleapis.com/chartmuseum.jenkins-x.io
Successfully added Helm repository storage.googleapis.com.
Adding missing Helm repo: bucketrepo http://bucketrepo/bucketrepo/charts/
Successfully added Helm repository bucketrepo.

Showing logs for build [32mjstrachan-nodey452-pr-1-pr-buil-sqbz5-2[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-jx-preview[0m
Creating a preview
Found commit author match for: jstrachan with email address: james.strachan@gmail.com
Created environment jstrachan-nodey452-pr-1
Namespace **-jstrachan-nodey452-pr-1 created 
expose:
  Annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-delete-policy: hook-succeeded
  config:
    domain: 34.76.161.100.nip.io
    exposer: Ingress
    http: "true"
preview:
  image:
    repository: gcr.io/jstrachan-multicluster/nodey452
    tag: 0.0.0-SNAPSHOT-PR-1-2
adding helm values file /workspace/source/charts/preview/**Requirements.values.yaml for namespace **-jstrachan-nodey452-pr-1
Updating PipelineActivities jstrachan-nodey452-pr-1-2 which has status Running
WARNING: preview application http://nodey452-**-jstrachan-nodey452-pr-1.34.76.161.100.nip.io not available, error was 503 503 Service Temporarily Unavailable, delaying for: 1.252573036s
Preview application is now available at: http://nodey452-**-jstrachan-nodey452-pr-1.34.76.161.100.nip.io
